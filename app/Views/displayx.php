<!doctype html>
<html lang="en" data-layout="vertical" data-topbar="light" data-sidebar="dark" data-sidebar-size="lg" data-sidebar-image="none" data-preloader="disable">

<head>

    <meta charset="utf-8" />
    <title>Dashboard Quickcount | Pilkada Kutai Timur 2024</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="Premium Multipurpose Admin & Dashboard Template" name="description" />
    <meta content="Danunih" name="author" />
    <!-- App favicon -->
    <link rel="shortcut icon" href="assets/images/favicon.ico">

    <!--Swiper slider css-->
    <link href="assets/libs/swiper/swiper-bundle.min.css" rel="stylesheet" type="text/css" />

    <!-- Layout config Js -->
    <script src="assets/js/layout.js"></script>
    <!-- Bootstrap Css -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!-- Icons Css -->
    <link href="assets/css/icons.min.css" rel="stylesheet" type="text/css" />
    <!-- App Css-->
    <link href="assets/css/app.min.css" rel="stylesheet" type="text/css" />
    <!-- custom Css-->
    <link href="assets/css/custom.min.css" rel="stylesheet" type="text/css" />

    <style>
        .bg-warning {
            background-color: #FF5722 !important;
        }
    </style>
    
</head>

<body data-bs-spy="scroll" data-bs-target="#navbar-example">

    <!-- Begin page -->
    <div class="layout-wrapper landing">
        
        <!-- end navbar -->
        <div class="vertical-overlay" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent.show"></div>

        <!-- start hero section -->
        <section class="section pb-0 hero-section" id="hero">
            <div class="bg-overlay bg-overlay-pattern"></div>
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8 col-sm-10">
                        <div class="text-center pt-2">
                            <h3 class="display-6 fw-semibold mb-3 lh-base">Quick Count Pilkada Kutai Timur 2024</h3>
                            
                            <div class="row">
                                <div class="col-xl-6">
                                    <img src="assets/images/1.png" alt="" class="img-paslon" />
                                    <div class="card overflow-hidden">
                                        <div class="card-body bg-marketplace">
                                            <h1 class="avatar-title bg-success-subtle rounded" id="bar1text" style="font-family: fantasy;font-size: 3rem;">0</h1>
                                            <!-- <h1 class="avatar-title bg-primary-subtle rounded">24,04%</h1> -->
                                            <div class="d-flex align-items-center pb-2">
                                                <div class="flex-grow-1">
                                                    <div class="progress animated-progress custom-progress progress-label" style="height:25px">
                                                        <div class="progress-bar bg-success" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" id="bar1"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xl-6">
                                    <img src="assets/images/2.png" alt="" class="img-paslon" />
                                    <div class="card overflow-hidden">
                                        <div class="card-body bg-marketplace">
                                                <h1 class="avatar-title bg-warning-subtle rounded" id="bar2text" style="font-family: fantasy;font-size: 3rem;">0</h1>
                                                <div class="d-flex align-items-center pb-2">
                                                <div class="flex-grow-1">
                                                    <div class="progress animated-progress custom-progress progress-label" style="height:25px">
                                                        <div class="progress-bar bg-warning" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" id="bar2"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- end row -->

                <div class="row pb-5">
                                    <div class="col-lg-4 col-md-6">
                                    <div class="card card-height-100">
                                <div class="card-header border-0 align-items-center d-flex">
                                    <h1 class="card-title mb-0 flex-grow-1 text-center text-bold">DATA MASUK</h1>
                                </div><!-- end cardheader -->
                                <div class="card-body">
                                <div id="total_progres" data-colors='["--vz-success"]' class="apex-charts" dir="ltr"></div>
                                </div><!-- end card body -->
                            </div>
                                    </div><!-- end col -->
                                    <div class="col-lg-4 col-md-6">
                                        <div class="card">
                                            <div class="card-body">
                                            <ul class="list-group list-group-flush border-dashed">
                                        <li class="list-group-item px-0">
                                            <div class="d-flex">
                                                <div class="flex-shrink-0 avatar-xs">
                                                    <span class="avatar-title bg-light p-1 rounded-circle">
                                                        <img src="assets/images/svg/crypto-icons/btc.svg" class="img-fluid" alt="">
                                                    </span>
                                                </div>
                                                <div class="flex-grow-1 ms-2">
                                                    <h6 class="mb-1">Voter Turn Out</h6>
                                                    <p class="fs-12 mb-0 text-muted"><i class="mdi mdi-circle fs-10 align-middle text-primary me-1"></i>VTO </p>
                                                </div>
                                                <div class="flex-shrink-0 text-end">
                                                    <h6 class="mb-1">Suara sah/DPT</h6>
                                                </div>
                                            </div>
                                        </li><!-- end -->
                                        <li class="list-group-item px-0">
                                            <div class="d-flex">
                                                <div class="flex-shrink-0 avatar-xs">
                                                    <span class="avatar-title bg-light p-1 rounded-circle">
                                                        <img src="assets/images/svg/crypto-icons/eth.svg" class="img-fluid" alt="">
                                                    </span>
                                                </div>
                                                <div class="flex-grow-1 ms-2">
                                                    <h6 class="mb-1">Margin of Error</h6>
                                                    <p class="fs-12 mb-0 text-muted"><i class="mdi mdi-circle fs-10 align-middle text-info me-1"></i>MOE </p>
                                                </div>
                                                <div class="flex-shrink-0 text-end">
                                                    <h6 class="mb-1">0.5%</h6>
                                                </div>
                                            </div>
                                        </li><!-- end -->
                                        <li class="list-group-item px-0">
                                            <div class="d-flex">
                                                <div class="flex-shrink-0 avatar-xs">
                                                    <span class="avatar-title bg-light p-1 rounded-circle">
                                                        <img src="assets/images/svg/crypto-icons/ltc.svg" class="img-fluid" alt="">
                                                    </span>
                                                </div>
                                                <div class="flex-grow-1 ms-2">
                                                    <h6 class="mb-1">Level of Confidence</h6>
                                                    <p class="fs-12 mb-0 text-muted"><i class="mdi mdi-circle fs-10 align-middle text-warning me-1"></i>LOE </p>
                                                </div>
                                                <div class="flex-shrink-0 text-end">
                                                    <h6 class="mb-1">99%</h6>
                                                </div>
                                            </div>
                                        </li><!-- end -->
                                    </ul>
                                            </div><!-- end card body -->
                                        </div><!-- end card -->
                                    </div><!-- end col -->
                                    <div class="col-lg-4 col-md-6">
                                        <div class="card">
                                            <div class="card-body">
                                                <div class="d-flex align-items-center">
                                                    <div class="avatar-sm flex-shrink-0">
                                                        <span class="avatar-title bg-light text-primary rounded-circle fs-3">
                                                            <i class="ri-arrow-right-circle-fill align-middle"></i>
                                                        </span>
                                                    </div>
                                                    <div class="flex-grow-1 ms-3">
                                                        <p class="text-uppercase fw-semibold fs-12 text-muted mb-1">Jumlah Sampel TPS</p>
                                                        <h4 class=" mb-0"><span class="counter-value" data-target="200">0</span></h4>
                                                    </div>
                                                </div>
                                            </div><!-- end card body -->
                                        </div><!-- end card -->
                                        <button type="button" class="btn btn-primary btn-label waves-effect waves-light" data-bs-toggle="modal" data-bs-target="#staticBackdrop"><i class="ri-user-smile-line label-icon align-middle fs-16 me-2"></i> Data Tracking</button>
                                    </div><!-- end col -->
                                </div>
            </div>
            <!-- end container -->
            <div class="position-absolute start-0 end-0 bottom-0 hero-shape-svg">
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1440 120">
                    <g mask="url(&quot;#SvgjsMask1003&quot;)" fill="none">
                        <path d="M 0,118 C 288,98.6 1152,40.4 1440,21L1440 140L0 140z">
                        </path>
                    </g>
                </svg>
            </div>
            <!-- end shape -->
        </section>
        <!-- end hero section -->

        <!-- start services -->
        <section class="section" id="services">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="text-center mb-5">
                            <h1 class="mb-3 ff-secondary fw-semibold lh-base">Distribusi Suara</h1>
                            <p class="text-muted">To achieve this, it would be necessary to have uniform grammar, pronunciation and more common words. If several languages coalesce the grammar</p>
                        </div>
                    </div>
                    <!-- end col -->
                </div>
                <!-- end row -->

                <div class="row g-3">
                    <table class="table table-stripped align-middle" style="width:100%">
                        <thead>
                            <tr>
                                <th>Zona</th>
                                <th>TPS Sample</th>
                                <th>TPS Masuk</th>
                                <th>Data Masuk (%)</th>
                                <th>(1) Kasmidi - Kinsu (%)</th>
                                <th>(2) Ardiansyah - Mahyunadi 2 (%)</th>
                            </tr>
                        </thead>
                        <tbody>
                        <?php
                            foreach($zona as $row){
                                $suaramasuk = ($row->kandidat1+$row->kandidat2);
                                $progressuara = ($suaramasuk / $row->dpt)*100;
                            ?>
                            <tr>
                                <td><?= $row->zona_name?></td>
                                <td>...</td>
                                <td>...</td>
                                <td><?= shortdec($progressuara)?></td>
                                <td class="text-center"><?= ($row->kandidat1)?shortdec(($row->kandidat1/$suaramasuk)*100):0;?></td>
                                <td class="text-center"><?= ($row->kandidat2)?shortdec(($row->kandidat2/$suaramasuk)*100):0;?></td>
                            </tr>
                            <?php } ?>
                        </tbody>
                    </table>
                    
                    <!-- end col -->

                    
                    <!-- end col -->
                </div>
                <!-- end row -->
            </div>
            <!-- end container -->
        </section>
        <!-- end services -->
        <section class="section" id="services">
            <div class="container">
            <hr>
        <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="text-center mb-5">
                            <h1 class="mb-3 ff-secondary fw-semibold lh-base">Data Realtime</h1>
                            <p class="text-muted">To achieve this, it would be necessary to have uniform grammar, pronunciation and more common words. If several languages coalesce the grammar</p>
                        </div>
                    </div>
                    <!-- end col -->
                </div>
                <div class="row">
                <div id="chartprogres" data-colors='["--vz-primary", "--vz-success"]' class="apex-charts" dir="ltr"></div>
                </div>
                </div>
        </section>

        
        <!--start back-to-top-->
        <button onclick="topFunction()" class="btn btn-danger btn-icon landing-back-top" id="back-to-top">
            <i class="ri-arrow-up-line"></i>
        </button>
        <!--end back-to-top-->

    </div>
    <!-- end layout wrapper -->

<!-- staticBackdrop Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-body text-center p-5">                
                <div class="mt-4">
                    <h4 class="mb-3">Realtime Progress</h4>
                    <p class="text-muted mb-4"> The transfer was not successfully received by us. the email of the recipient wasn't correct.</p>
                    
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

    <!-- JAVASCRIPT -->
    <script>
    var base_url = "<?= base_url();?>";
    </script>
    <script src="assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/libs/simplebar/simplebar.min.js"></script>
    <script src="assets/libs/node-waves/waves.min.js"></script>
    <script src="assets/libs/feather-icons/feather.min.js"></script>
    <script src="assets/js/pages/plugins/lord-icon-2.1.0.js"></script>
    <script src="assets/js/plugins.js"></script>

    <script src="assets/libs/apexcharts/apexcharts.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="assets/js/jquery.easy-pie-chart.js"></script>

    <!--Swiper slider js-->
    <script src="assets/libs/swiper/swiper-bundle.min.js"></script>

    <!-- landing init -->
    <script src="assets/js/pages/landing.init.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"></script>

    <script>
        var options = {
          series: [],
          chart: {
          height: 350,
          type: 'line',
          dropShadow: {
            enabled: true,
            color: '#000',
            top: 18,
            left: 7,
            blur: 10,
            opacity: 0.2
          },
          zoom: {
            enabled: false
          },
          toolbar: {
            show: false
          }
        },
        noData: {
            text: 'Loading...'
        },
        colors: ['#4CAF50', '#FF5722'],
        dataLabels: {
          enabled: true,
        },
        stroke: {
          curve: 'smooth'
        },
        title: {
          text: 'Average High & Low Temperature',
          align: 'left'
        },
        grid: {
          borderColor: '#e7e7e7',
          row: {
            colors: ['#f3f3f3', 'transparent'], // takes an array which will be repeated on columns
            opacity: 0.5
          },
        },
        markers: {
          size: 1
        },
        xaxis: {
          categories: [],
          title: {
            text: 'Progres %'
          }
        },
        yaxis: {
          title: {
            text: 'Perolehan Suara'
          },
          min: 5,
          max: 70
        },
        legend: {
          position: 'top',
          horizontalAlign: 'right',
          floating: true,
          offsetY: -25,
          offsetX: -5
        }
        };

        var chart = new ApexCharts(document.querySelector("#chartprogres"), options);
        chart.render();

        var url = '<?= site_url('display/progresschart')?>';
        updateseries();

        function updateseries() {
            axios({
            method: 'GET',
            url: url,
            }).then(function(response) {
            chart.updateSeries([
                {
                name: '(1) Kasmidi - Kinsu',
                data: response.data.kandidat1
                },
                {
                name: '(2) Ardiansyah - Mahyunadi',
                data: response.data.kandidat2
                }
            ])
            });
        }

        progressBar();
        setInterval(progressBar, 10000);

        function progressBar() {
            $.get('<?= site_url('display/suara')?>', function(res) {
                $('#bar1').css('width',res.kandidat1+'%');
                $('#bar1text').text(res.kandidat1+'%');
                $('#bar2').css('width',res.kandidat2+'%');
                $('#bar2text').text(res.kandidat2+'%');
            });
        }

        updateProgresDonut();

        function updateProgresDonut(){
            
            var options = {
                series: [50],
                chart: {
                    height: 200,
                    type: 'radialBar',
                },
                dataLabels: {
                    enabled: !1
                },
                plotOptions: {
        radialBar: {
            hollow: {
                margin: 0,
                size: "70%"
            },
            track: {
                margin: 1
            },
            dataLabels: {
                show: !0,
                name: {
                    show: !1
                },
                value: {
                    show: !0,
                    fontSize: "25px",
                    fontWeight: 600,
                    offsetY: 8
                }
            }
        }
        },
        };

            var chart = new ApexCharts(document.querySelector("#total_progres"), options);
            chart.render();

            setInterval(function() {
                $.get('<?= site_url('display/progres')?>', function(res) {
                chart.updateSeries([res.progres]);
                });
            }, 10000);
        }
    </script>
</body>

</html>